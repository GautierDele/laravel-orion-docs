(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{360:function(t,s,e){"use strict";e.r(s);var a=e(42),n=Object(a.a)({},(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"security"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#security"}},[t._v("#")]),t._v(" Security")]),t._v(" "),e("h2",{attrs:{id:"authentication"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#authentication"}},[t._v("#")]),t._v(" Authentication")]),t._v(" "),e("p",[t._v("Laravel Orion does not provide any authentication perks at the moment, assuming that developer is responsible for setting up the desired app's authentication capabilities. Hovewer, we recommend using "),e("a",{attrs:{href:"https://github.com/laravel/passport",target:"_blank",rel:"noopener noreferrer"}},[t._v("Laravel Passport"),e("OutboundLink")],1),t._v(" or "),e("a",{attrs:{href:"https://github.com/laravel/sanctum",target:"_blank",rel:"noopener noreferrer"}},[t._v("Laravel Sanctum"),e("OutboundLink")],1),t._v(" for this purpose.")]),t._v(" "),e("h2",{attrs:{id:"authorization"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#authorization"}},[t._v("#")]),t._v(" Authorization")]),t._v(" "),e("p",[t._v("By default, both "),e("RouterLink",{attrs:{to:"/guide/models.html"}},[t._v("model")]),t._v(" and "),e("RouterLink",{attrs:{to:"/guide/relationships.html"}},[t._v("relation")]),t._v(" controllers rely on "),e("a",{attrs:{href:"https://laravel.com/docs/master/authorization#creating-policies",target:"_blank",rel:"noopener noreferrer"}},[t._v("model policies"),e("OutboundLink")],1),t._v(" to determine whether currently authenticated user is allowed to perform certain actions or not.")],1),t._v(" "),e("p",[t._v("While it is not recommended, but in some situations you may want to disable authorization checks on a particular controller. To do so, you can use "),e("code",[t._v("Orion\\Traits\\DisableAuthorization")]),t._v(" trait.")]),t._v(" "),e("div",{staticClass:"language-php extra-class"},[e("pre",{pre:!0,attrs:{class:"language-php"}},[e("code",[t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("namespace")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token package"}},[t._v("App"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Http"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Controllers"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("API")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("use")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token package"}},[t._v("App"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Models"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Post")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("use")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token package"}},[t._v("Orion"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Traits"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("DisableAuthorization")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("PostsController")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("APIController")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("use")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token package"}},[t._v("DisableAuthorization")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n     * @var string $model\n     */")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("protected")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$model")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Post"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("h2",{attrs:{id:"validation"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#validation"}},[t._v("#")]),t._v(" Validation")]),t._v(" "),e("p",[t._v("To validate incoming requests data to "),e("code",[t._v("store")]),t._v(" and "),e("code",[t._v("update")]),t._v(" endpoints, Laravel Orion will try to find "),e("a",{attrs:{href:"https://laravel.com/docs/master/validation#form-request-validation",target:"_blank",rel:"noopener noreferrer"}},[t._v("request class"),e("OutboundLink")],1),t._v(" for resource model following the class name pattern:\n"),e("code",[t._v("App\\Http\\Requests\\<model>Request")]),t._v(".")]),t._v(" "),e("p",[t._v("For example, if you have "),e("code",[t._v("App\\Models\\Message")]),t._v(" model, the related request class would be "),e("code",[t._v("App\\Http\\Requests\\MessageRequest")]),t._v(".")]),t._v(" "),e("p",[t._v("If request class names in your app do not follow this naming convention or if you just would like to be more explicit, set "),e("code",[t._v("protected $request")]),t._v(" property on controller to a fully-qualified request class name.")]),t._v(" "),e("div",{staticClass:"language-php extra-class"},[e("pre",{pre:!0,attrs:{class:"language-php"}},[e("code",[t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("namespace")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token package"}},[t._v("App"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Http"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Controllers"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("API")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("use")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token package"}},[t._v("App"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Models"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Message")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("use")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token package"}},[t._v("App"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Http"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Requests"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("CustomMessageRequest")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MessagesController")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("APIController")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n     * @var string $model\n     */")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("protected")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$model")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Message"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n    * @var string $request\n    */")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("protected")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$request")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" CustomMessageRequest"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("p",[t._v("The request class is then binded using Laravel "),e("a",{attrs:{href:"https://laravel.com/docs/master/container",target:"_blank",rel:"noopener noreferrer"}},[t._v("Service Container"),e("OutboundLink")],1),t._v(" and used in "),e("code",[t._v("store")]),t._v(" and "),e("code",[t._v("update")]),t._v(" methods to validate request data the same way as if you would explicitly set it in method signature:")]),t._v(" "),e("div",{staticClass:"language-php extra-class"},[e("pre",{pre:!0,attrs:{class:"language-php"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("store")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("CustomMessageRequest "),e("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$request")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("h3",{attrs:{id:"validation-rules"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#validation-rules"}},[t._v("#")]),t._v(" Validation Rules")]),t._v(" "),e("h4",{attrs:{id:"defining-rules-for-store-and-update-endpoints"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#defining-rules-for-store-and-update-endpoints"}},[t._v("#")]),t._v(" Defining rules for "),e("code",[t._v("store")]),t._v(" and "),e("code",[t._v("update")]),t._v(" endpoints")]),t._v(" "),e("p",[t._v("Laravel Orion provides "),e("code",[t._v("Orion\\Http\\Requests\\Request")]),t._v(" class with a handful of methods to specify validation rules.")]),t._v(" "),e("p",[t._v("To define common rules for both "),e("code",[t._v("store")]),t._v(" and "),e("code",[t._v("update")]),t._v(" endpoints you can use "),e("code",[t._v("commonRules")]),t._v(" method.\nIf you would like to define rules specific to endpoint you can use "),e("code",[t._v("storeRules")]),t._v(" and "),e("code",[t._v("updateRules")]),t._v(" methods.")]),t._v(" "),e("div",{staticClass:"custom-block warning"},[e("p",{staticClass:"custom-block-title"},[t._v("ATTENTION")]),t._v(" "),e("p",[t._v("Rules specified in "),e("code",[t._v("storeRules")]),t._v(" and "),e("code",[t._v("updateRules")]),t._v(" methods are merged with rules from "),e("code",[t._v("commonRules")]),t._v(" method.")])]),t._v(" "),e("div",{staticClass:"language-php extra-class"},[e("pre",{pre:!0,attrs:{class:"language-php"}},[e("code",[e("span",{pre:!0,attrs:{class:"token php language-php"}},[e("span",{pre:!0,attrs:{class:"token delimiter important"}},[t._v("<?php")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("namespace")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token package"}},[t._v("App"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Http"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Requests")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("use")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token package"}},[t._v("Orion"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Http"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Requests"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Request")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("PostRequest")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Request")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("commonRules")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'title'")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'required'")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("storeRules")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n            "),e("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'status'")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token single-quoted-string string"}},[t._v("'required|in:draft,review'")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])]),e("p",[t._v("In this example, when request is made to "),e("code",[t._v("store")]),t._v(" endpoint, both "),e("code",[t._v("title")]),t._v(" and "),e("code",[t._v("status")]),t._v(" fields will be required. However, when request method is made to "),e("code",[t._v("update")]),t._v(" endpoint, only "),e("code",[t._v("title")]),t._v(" field would be required, because there is no other rules defined in "),e("code",[t._v("updateRules")]),t._v(" method and "),e("code",[t._v("title")]),t._v(" field is marked as required in the "),e("code",[t._v("commonRules")]),t._v(" method.")]),t._v(" "),e("h4",{attrs:{id:"defining-rules-for-relation-methods"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#defining-rules-for-relation-methods"}},[t._v("#")]),t._v(" Defining rules for relation methods")]),t._v(" "),e("p",[t._v("You can also define rules for relation specific endpoints: "),e("code",[t._v("associateRules")]),t._v(", "),e("code",[t._v("attachRules")]),t._v(", "),e("code",[t._v("detachRules")]),t._v(", "),e("code",[t._v("syncRules")]),t._v(", "),e("code",[t._v("toggleRules")]),t._v(", "),e("code",[t._v("updatePivotRules")]),t._v(".")]),t._v(" "),e("div",{staticClass:"custom-block warning"},[e("p",{staticClass:"custom-block-title"},[t._v("ATTENTION")]),t._v(" "),e("p",[t._v("Rules specified in these methods are "),e("strong",[t._v("NOT")]),t._v(" merged with rules from "),e("code",[t._v("commonRules")]),t._v(" method.")])]),t._v(" "),e("h4",{attrs:{id:"defining-rules-for-batch-operations"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#defining-rules-for-batch-operations"}},[t._v("#")]),t._v(" Defining rules for batch operations")]),t._v(" "),e("p",[t._v("You can also define rules for batch endpoints: "),e("code",[t._v("batchStore")]),t._v(", "),e("code",[t._v("batchUpdate")]),t._v(".")])])}),[],!1,null,null,null);s.default=n.exports}}]);